[2025-12-12T08:33:48Z] ════════════════════════════════════════════════════════
[2025-12-12T08:33:48Z] NIGHTLY STABLE TABLES UPDATE
[2025-12-12T08:33:48Z] ════════════════════════════════════════════════════════
[2025-12-12T08:33:48Z] ✓ Token refreshed
[2025-12-12T08:33:48Z] 
[2025-12-12T08:33:48Z] Step 1: Updating campuses...
Fetching campuses...
Fetching campuses page 1...
  -> 54 items saved to /srv/42_Network/repo/exports/02_campus/page_1.json (raw: 54)
Last page reached.
Merging pages into /srv/42_Network/repo/exports/02_campus/all.json
Done. Merged count: 54
NOTICE:  relation "campuses" already exists, skipping
CREATE TABLE
NOTICE:  relation "idx_campuses_city" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_campuses_active" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_campuses_public" already exists, skipping
CREATE INDEX
DO
DROP TABLE
CREATE TABLE
TRUNCATE TABLE
Staging campuses...
COPY 54
Pruning campuses missing from this snapshot...
DELETE 0
Upserting campuses...
 inserted | updated 
----------+---------
        0 |      54
(1 row)

TRUNCATE TABLE
Campuses: total=54, recently_ingested=54
Campuses sync complete.
[2025-12-12T08:33:52Z] ✓ Campuses updated
[2025-12-12T08:33:52Z] 
[2025-12-12T08:33:52Z] Step 2: Updating projects...
Fetching projects...
Fetching cursus 21 projects page 1...
  -> 100 items
Fetching cursus 21 projects page 2...
  -> 100 items
Fetching cursus 21 projects page 3...
  -> 100 items
Fetching cursus 21 projects page 4...
  -> 100 items
Fetching cursus 21 projects page 5...
  -> 100 items
Fetching cursus 21 projects page 6...
  -> 33 items
Last page reached.
Merging pages into /srv/42_Network/repo/exports/05_projects/raw_all.json
Done. Merged count: 533
Building project_sessions export...
Building campus_projects export...
Building normalized projects export...
CREATE TABLE
NOTICE:  relation "projects" already exists, skipping
NOTICE:  relation "idx_projects_slug" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_projects_parent_id" already exists, skipping
CREATE INDEX
NOTICE:  column "difficulty" of relation "projects" already exists, skipping
NOTICE:  column "exam" of relation "projects" already exists, skipping
NOTICE:  column "git_id" of relation "projects" already exists, skipping
NOTICE:  column "repository" of relation "projects" already exists, skipping
NOTICE:  column "recommendation" of relation "projects" already exists, skipping
NOTICE:  column "created_at" of relation "projects" already exists, skipping
NOTICE:  column "updated_at" of relation "projects" already exists, skipping
ALTER TABLE
DO
CREATE TABLE
NOTICE:  relation "campus_projects" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_campus_projects_project" already exists, skipping
NOTICE:  relation "project_sessions" already exists, skipping
CREATE TABLE
NOTICE:  relation "idx_project_sessions_project_id" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_project_sessions_campus_id" already exists, skipping
CREATE INDEX
NOTICE:  relation "idx_project_sessions_cursus_id" already exists, skipping
CREATE INDEX
DO
NOTICE:  column "max_people" of relation "project_sessions" already exists, skipping
NOTICE:  column "duration_days" of relation "project_sessions" already exists, skipping
NOTICE:  column "commit" of relation "project_sessions" already exists, skipping
NOTICE:  column "description" of relation "project_sessions" already exists, skipping
NOTICE:  column "is_subscriptable" of relation "project_sessions" already exists, skipping
NOTICE:  column "objectives" of relation "project_sessions" already exists, skipping
NOTICE:  column "scales" of relation "project_sessions" already exists, skipping
NOTICE:  column "terminating_after" of relation "project_sessions" already exists, skipping
NOTICE:  column "uploads" of relation "project_sessions" already exists, skipping
ALTER TABLE
DO
DO
DROP TABLE
CREATE TABLE
TRUNCATE TABLE
DROP TABLE
CREATE TABLE
TRUNCATE TABLE
DROP TABLE
CREATE TABLE
TRUNCATE TABLE
Staging into projects_delta...
COPY 538
Staging campus_projects...
COPY 24195
Staging project_sessions...
COPY 7287
Pruning projects missing from this snapshot...
DELETE 0
Upserting projects...
 inserted | updated 
----------+---------
        0 |     538
(1 row)

TRUNCATE TABLE
Syncing campus_projects...
DELETE 0
INSERT 0 24195
TRUNCATE TABLE
INSERT 0 7287
TRUNCATE TABLE
Projects sync complete.
Projects: total=538, recently_ingested=538
Campus projects: total=24195, recently_ingested=24195
Project sessions: total=7287, recently_ingested=7287
[2025-12-12T08:35:07Z] ✓ Projects updated
[2025-12-12T08:35:07Z] 
[2025-12-12T08:35:07Z] Step 3: Updating cursus...
Fetching cursus...
Fetching cursus id 21...
jq: parse error: Invalid numeric literal at line 1, column 8
[2025-12-12T08:35:07Z] ✗ Cursus update failed (continuing...)
[2025-12-12T08:35:07Z] 
[2025-12-12T08:35:07Z] Step 4: Updating campus achievements...
Fetching campus achievements...
Fetching campus 76 achievements page 1...
Fetching campus 75 achievements page 1...
Fetching campus 73 achievements page 1...
Fetching campus 73 achievements page 2...
jq: parse error: Invalid numeric literal at line 1, column 8
[2025-12-12T08:35:13Z] ✗ Campus achievements update failed (continuing...)
[2025-12-12T08:35:13Z] 
[2025-12-12T08:35:13Z] ════════════════════════════════════════════════════════
[2025-12-12T08:35:13Z] NIGHTLY UPDATE COMPLETE
[2025-12-12T08:35:13Z] ════════════════════════════════════════════════════════
[2025-12-12T08:35:13Z] Next: live_db_sync will update users daily with campus references
[2025-12-12T08:35:13Z] 
[2025-12-12T18:44:51Z] ════════════════════════════════════════════════════════════════
[2025-12-12T18:44:52Z] NIGHTLY CURSUS 21 STABLE TABLES UPDATE
[2025-12-12T18:44:53Z] ═══════════════════════════════════════════════════════════════=
[2025-12-12T18:44:54Z] Scope: kind=student, alumni?=false (excludes all alumni users)
[2025-12-12T18:44:55Z] ════════════════════════════════════════════════════════════════
[2025-12-12T18:44:56Z] ✓ Token refreshed
[2025-12-12T18:44:57Z] 
[2025-12-12T18:44:58Z] PHASE 1: FETCHING CURSUS 21 DATA (expected ~40-50 API hits)
[2025-12-12T18:44:59Z] ─────────────────────────────────────────────────────────────
[2025-12-12T18:45:00Z] 
[2025-12-12T18:45:01Z] Step 1.1: Fetching cursus, projects, users, achievements, enrollments...
[2025-12-12T18:45:02Z] ====== FETCH CURSUS 21 CORE DATA ORCHESTRATOR START ======
[2025-12-12T18:45:02Z] Filters: kind=student, alumni?=false
[2025-12-12T18:45:02Z] Step 1: Fetch cursus 21 metadata...
Fetching cursus id 21...
Done. Merged count: 1 (cursus_id=21)
[2025-12-12T18:45:03Z] Step 1b: Fetch coalitions metadata...
[2025-12-12T18:45:03Z] ====== FETCH COALITIONS START ======
[2025-12-12T18:45:03Z] Fetching page 1...
[2025-12-12T18:45:15Z]   Page 1: 100 records, 29KB, 10833ms
[2025-12-12T18:45:15Z] Fetching page 2...
[2025-12-12T18:45:29Z]   Page 2: 100 records, 30KB, 13131ms
[2025-12-12T18:45:29Z] Fetching page 3...
[2025-12-12T18:45:42Z]   Page 3: 100 records, 29KB, 12103ms
[2025-12-12T18:45:42Z] Fetching page 4...
[2025-12-12T18:45:50Z]   Page 4: 50 records, 14KB, 6344ms
[2025-12-12T18:45:50Z] Total: 350 coalitions in 102KB across 4 pages, 4 API hits
[2025-12-12T18:45:50Z] Exported to /srv/42_Network/repo/exports/08_coalitions/all.json
[2025-12-12T18:45:50Z] ====== FETCH COALITIONS COMPLETE (47s) ======
[2025-12-12T18:45:50Z] 
[2025-12-12T18:45:50Z] Step 2: Fetch cursus 21 projects...
Fetching cursus 21 projects page 1...
  -> 100 items
Fetching cursus 21 projects page 2...
