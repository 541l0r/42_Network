# 42 Network Pipeline Configuration
# Used by: detector, fetcher, upserter, backlog_worker scripts

[detector]
# Which campuses to process: "all" or comma-separated (e.g., 1-54,76)
# WHY: Allows filtering detections by campus, useful for testing or partial runs
campus_range=all

DETECTOR_INTERVAL=65

# Skip fingerprint delta check if timestamp difference < this (seconds)
# 3600 = 1 hour cooldown between detections for external campuses
# 21 = instant detection for campus 21 (internal)
# WHY: Prevents rate-limit spam from rapid API changes (implements 1h cooldown)
DELTA_SKIP_SECONDS=3600

# API endpoint for 42 Intra
# WHY: Used by fetcher and backlog_worker to fetch user data
API_BASE=https://api.intra.42.fr

[fetcher]
# Delay between API calls (seconds) - PER INSTANCE with global rate limiter
# With synchronized fetchers using global_rate_limiter.sh:
#   2 instances @ 6.0s: 2 × 600 = 1,200 req/hour
#   3 instances @ 9.0s: 3 × 400 = 1,200 req/hour
#   4 instances @ 12.0s: 4 × 300 = 1,200 req/hour
# Formula: (3600 / RATE_LIMIT_DELAY) = 400 req/hour GLOBAL (safe, conservative)
# WHY: Global safe mode - 9s respects API limits with good margin
RATE_LIMIT_DELAY=6.0

# Number of parallel fetcher instances to run
# WHY: With global rate limiting, multiple fetchers share the 1,200 req/hour cap
# Recommended: 2-3 for balance between parallelism and queue clearing speed
FETCHER_INSTANCES=3

[general]
# Test mode: set to --dry-run for simulation without database changes
# WHY: Safe testing of pipeline without modifying production database
DRY_RUN=0
