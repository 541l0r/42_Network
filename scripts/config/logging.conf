# Logging configuration for Cursus 21 pipeline
# Controls log retention, compression, and rotation strategies

# ════════════════════════════════════════════════════════════════
# LOG DIRECTORIES
# ════════════════════════════════════════════════════════════════

LOG_DIR="/srv/42_Network/repo/logs"
LOG_ARCHIVE_DIR="/srv/42_Network/repo/logs/archive"
TEMP_LOG_DIR="/srv/42_Network/repo/logs/temp"

# ════════════════════════════════════════════════════════════════
# LOG FILES & RETENTION
# ════════════════════════════════════════════════════════════════

# Main logs (kept for 7 days)
LOG_NIGHTLY="nightly_stable_tables.log"
LOG_NIGHTLY_CRON="nightly_stable_tables_cron.log"
LOG_LIVE_SYNC="live_db_sync.log"

# Component logs (kept for 3 days, rotated daily)
LOG_FETCH_CURSUS="fetch_cursus.log"
LOG_FETCH_PROJECTS="fetch_projects.log"
LOG_FETCH_USERS="fetch_cursus_users.log"
LOG_FETCH_ACHIEVEMENTS="fetch_campus_achievements.log"
LOG_FETCH_COALITIONS="fetch_coalitions.log"

LOG_UPDATE_CAMPUSES="update_campuses.log"
LOG_UPDATE_CURSUS="update_cursus.log"
LOG_UPDATE_PROJECTS="update_projects.log"
LOG_UPDATE_USERS="update_users.log"
LOG_UPDATE_ACHIEVEMENTS="update_achievements.log"
LOG_UPDATE_COALITIONS="update_coalitions.log"

# ════════════════════════════════════════════════════════════════
# RETENTION POLICIES (in days)
# ════════════════════════════════════════════════════════════════

RETENTION_MAIN_LOGS=7          # Keep main pipeline logs for 7 days
RETENTION_COMPONENT_LOGS=3     # Keep component logs for 3 days
RETENTION_ARCHIVE=30           # Keep compressed archives for 30 days
RETENTION_TEMP=1               # Keep temp logs for 1 day

# ════════════════════════════════════════════════════════════════
# LOGGING BEHAVIOR
# ════════════════════════════════════════════════════════════════

# Speed parameter for log output (seconds delay between writes)
# Use 0 for immediate, 1 for 1-second delay, etc.
LOG_WRITE_DELAY_SECONDS=1

# Log level: DEBUG, INFO, WARN, ERROR
LOG_LEVEL="INFO"

# Compression for archived logs
ENABLE_LOG_COMPRESSION=true
COMPRESS_FORMAT="gzip"  # gzip or bzip2

# Rotation strategy
LOG_ROTATION_ENABLED=true
LOG_ROTATION_SIZE_MB=50  # Rotate if log exceeds 50MB
LOG_ROTATION_AGE_DAYS=1  # Rotate daily

# ════════════════════════════════════════════════════════════════
# CLEANUP SCHEDULE
# ════════════════════════════════════════════════════════════════

# Run cleanup at this time (cron format: minute hour day month dow)
CLEANUP_SCHEDULE="0 2 * * *"  # 02:00 UTC daily

# Directories to monitor for cleanup
CLEANUP_DIRS=(
  "$LOG_DIR"
  "$LOG_ARCHIVE_DIR"
  "$TEMP_LOG_DIR"
)
